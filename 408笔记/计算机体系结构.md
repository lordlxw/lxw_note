### 计算机体系结构

### 一、汇编

汇编程序从写-》执行的整个过程：

编程-1.asm-编译-1.obj-连接(link)-1.exe-加载(command)-内存中程序-运行

#### 1、8086为例

> 总共14个寄存器：
>
> 八个通用寄存器：四个数据寄存器+栈顶指针寄存器（SP）、基址寄存器（BP）、目标变址寄存器、源变址寄存器
>
> AX：累加	BX：基址	CX：计数	DX：数据
>
> SP：当程序中使用堆栈区时，SP中存放的16位二进制数据为指向堆栈段栈顶的地址，在通用时SP中存放的是数据，不可以拆分为两个8位寄存器。——堆栈段
>
> BP：间接寻址时用于存放段基地址——数据段
>
> 变址寄存器（SI、DI）：
>
> 变址寄存器中存放的地址可以指向代码段、数据段、附加段中的任意位置，不存放专用地址，因此也被称为变址寄存器。在通用时SI和DI中存放的是数据，不可以拆分为两个8位寄存器。
>
> 

#### 2、CPU读写过程

> CPU通过地址线发送数据给内存
>
> CPU通过控制线发给内存，告诉它是读取/写
>
> CPU通过数据线将数据写入/读

#### 3、三根总线

> ==地址总线==：CPU通过地址总线来指定存储器单元，决定CPU寻址单元大小
>
> 10根地址总线（地址总线宽度为10）——可以表示0-1023种不同数据
>
> 这样CPU最多可以寻找2的10次方个内存单元

> ==控制总线==：控制总线宽度决定了CPU对外部器件的控制能力

> 数据总线：数据总线宽度决定了CPU与其他器件进行数据传送时一次性数据传输量。

#### 4、内存空间地址分配（8086）

> 00000H-9FFFFH——主存RAM
>
> A0000H-BFFFFH——显存RAM
>
> C0000H-FFFFFH——各类ROM

#### 5、栈

![栈](C:\Typora笔记\408笔记\Images\栈.png)

10000H-1000FH才是真正的栈空间，SS=1000H，PUSH，SP-2，POP，SP+2

<u>一个栈段的最大容量为64KB</u>，0-FFFFH

#### 6、指令

> DOS方式下，一般情况0:200-0:2ff 空间没有其他系统或数据代码（256个字节）

> 乘法指令和除法指令：
>
> div：
>
> 除数：8/16位
>
> 被除数：默认放在AX或DX和AX中，除数8位-被除数16位，除数16位-被除数32位
>
> 结果：若除数8位，AL存储除法的商，AH存余数。若除数16位，则AX存除法商，DX存余数。

> 转移指令：
>
> 可以修改IP或同时修改CS和IP
>
> 无条件转移指令：jmp
>
> 循环指令：loop
>
> 有条件转移指令：jcxz（cx=0即转移）