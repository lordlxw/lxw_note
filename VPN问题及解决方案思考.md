问题：

1、最近魔法上网挂了美国节点，也开了全局代理，但好多国外网页还是能检测出你用了VPN，想从源头查出来是为什么。





2、挂了全局代理，能访问google，但是cmd仍ping不通。

> 代理软件是不通 icmp 的，也就是 ping 不通的。
>
> 现在的代理基本都是 socks5 代理，会话层。ping 属于 ICMP 协议在网络层，怎么会 ping 的通。除非你用 VPN ，这个可以跑网络层或链路层，但这个太容易被识别，基本没用。
>
> 不是 VPN 容易识别，而是因为复杂度和性能等原因，抗封锁的协议基本都是作为代理实现的。非要用 vpn 可以用 ==Wireguard / GUE==等协议套一层。
> 还有一个原因是墙对 UDP 不友好，而 VPN 协议对 TCP 不友好，TCP in TCP 对性能的影响很严重。
>
> 
>
> 协议是否有特征与是否是 vpn 没有关系，只是主流的无特征 /混淆特征的协议多是作为代理协议实现的罢了。常用的分流、规则等功能 vpn 实现起来比较复杂，甚至需要用户态网络栈，WG 等正经 vpn 肯定不需要考虑这种问题。再就是正经 VPN 也不用担心 UDP qos 和 容易被 DDOS 等问题，而用 TCP 实现 vpn 性能损失就不是一点半点了。





3、PAC模式和全局模式的区别

> **区别⼀：使⽤流量多少不⼀样。**
>
> PAC模式：节省流量。
>
> 全局模式：流量消耗较多。
>
> **区别⼆：运⾏速度快慢不⼀样。**
>
> PAC模式：国内⽹站依旧⾛本地⽹络，速度快，绝⼤部分国外⽹站都⾛代理，速度也快。
>
> 全局模式：所有⽹站都⾛代理，访问国内⽹站速度变慢。
>
> **区别三：访问⽹站覆盖⾯不⼀样。**
>
> PAC模式：少部分国外⽹站不⾛代理，⽆法起到加速效果，甚⾄⽆法访问。
>
> 全局模式：可访问全球所有⽹站。
>
> **区别四：运⾏原理不⼀样。**
>
> PAC模式：所有http%2Fsocks数据经过代理服务器的转发送出。⽽只有⽀持socks5或者使⽤系统代理的软件才能使⽤Shadow_socks（⼀般的浏览器都是默认使⽤系统代理）。
>
> 全局模式：不要求应⽤程序遵循特定的操作系统平台，只是简单地传递数据包，⽽不必关⼼是何种应⽤协议（⽐如FTP、HTTP和NNTP请求）。